<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_clientes">
        <t t-call="web.html_container">
            <t t-call="web.internal_layout">
                <div class="page">
                    <h2>Informe de Clientes</h2>
                    <h3 t-esc="partner.document_number + ' - ' + partner.name if partner.document_number else partner.name"/>
                    <p>Tipo de Reporte: <span t-esc="tipo_reporte"/></p>
                    <p>Rango de Fechas: <span t-esc="rango_fechas"/></p>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Factura</th>
                                <th>Fecha</th>
                                <th>Vencimiento</th>
                                <th>Total</th>
                                <th>Abono</th>
                                <th>Saldo</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="docs" t-as="invoice">
                                <tr>
                                    <td t-esc="invoice.name"/>
                                    <td t-esc="invoice.invoice_date"/>
                                    <td t-esc="invoice.invoice_date_due"/>
                                    <td t-esc="format_amount(invoice.amount_total, invoice.currency_id)"/>
                                    <td t-esc="format_amount(invoice.amount_total - invoice.amount_residual, invoice.currency_id)"/>
                                    <td t-esc="format_amount(invoice.amount_residual, invoice.currency_id)"/>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </div>
            </t>
        </t>
    </template>

    <report 
        id="action_report_clientes"
        string="Informe de Estado de Pagos"
        model="insumar.estadopagos.wizard"
        report_type="qweb-pdf"
        name="Insumar_Estadopagos.report_clientes"
        file="Insumar_Estadopagos.report_clientes"
        paperformat="a4"
    />
</odoo>